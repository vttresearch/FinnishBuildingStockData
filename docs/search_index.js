var documenterSearchIndex = {"docs":
[{"location":"input/#Required-input-data-format","page":"Required input data format","title":"Required input data format","text":"","category":"section"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"This module uses a Spine Datastore for storing and accessing the input data. See the Spine Toolbox repository for more information on the subject. In a Spine Datastore, the data is organized into object classes storing data for individual objects, and relationship classes storing data for relationships between multiple objects.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"Essentially, the first step of actually using this module is to import the input data into a Spine Datastore, explained in the README.md files of the input data repositories. Below, you'll find lists of all the Input object classes and Input relationship classes required by the FinnishBuildingStockData.jl module, as well as brief explanations of their purpose, use, and contained parameters.","category":"page"},{"location":"input/#Input-object-classes","page":"Required input data format","title":"Input object classes","text":"","category":"section"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"building_period: Represents a period in time, during which a building was built. Used to connect structures, fenestration, and ventilation properties to building statistics.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"period_start: The year when the building_period starts.\nperiod_end: The year when the building_period ends.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"building_stock: Represents a snapshot of a building stock, e.g. Finnish building stock in the year 2030. Used to separate e.g. different countries and years of building stock data.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"TODO: Currently needs to be named <NAME>_<YEAR>, as the year the building_stock represents is later parsed from the name.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"building_type: Represents a certain category of buildings, e.g. detached house, apartment block, office building, etc. Used to distinguish between different buildings found in the building stock statistics.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"frame_material: Represents a load-bearing material used in building frames. Used to weight different structures depending on the frame material share data when calculating the aggregated structural properties.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"heat_source: Represents a source of heat energy for a building, e.g. coal or electricity. Used to distinguish between different heating solutions in the building stock statistics.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"layer_id: A unique identifier for a structural layer in the raw structural data.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"location_id: A unique identifier for a geographical location, e.g. a national municipality code.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"location_name: The name of the location in question, e.g. the name of the municipality.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"source: Represents a source of structural, fenestration, or ventilation data in the raw input. Mainly used to deduce when the structural/fenestration/ventilation properties are relevant.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"source_description: Briefly describes the source, e.g. which document the raw input data is obtained from, or what that document is.\nsource_year: Tells which year the source is supposed to represent, e.g. 1960 for parameters assumed valid from 1960s onwards.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"structure: Represents a building structure. Unfortunately, due to non-unique structural identifiers in the Finnish raw data, actual unique structures are represented as (source,structure) pairs.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"structure_material: Represents a certain construction material, e.g. wood or mineral wool. Used to store the properties of the construction materials for the structural proerty calculations.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"material_nodes: Freeform notes about the material data.\nmaximum_density_kg_m3: Maximum density of the material found in literature in [kg/m3].\nmaximum_specific_heat_capacity_J_kgK: Maximum specific heat capacity of the material found in literature in [J/kgK].\nmaximum_thermal_conductivity_W_mK: Maximum thermal conductivity of the material found in literature in [W/mK].\nminimum_density_kg_m3: Minimum density of the material found in literature in [kg/m3].\nminimum_specific_heat_capacity_J_kgK: Minimum specific heat capacity of the material found in literature in [J/kgK].\nminimum_thermal_conductivity_W_mK: Minimum thermal conductivity of the material found in literature in [W/mK].","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"structure_type: Represents a category of building structures, e.g. exterior walls, base floors, roofs, etc. Used for storing common properties, like surface resistances and thermal bridges.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"exterior_resistance_m2K_W: Exterior surface resistance for this structure_type in [m2K/W].\ninterior_resistance_m2K_W: Interior surface resistance for this structure_type in [m2K/W].\nis_internal: A boolean flag for whether a structure is an internal structure, meaning not part of the building envelope. Set to true for partition walls and separating floors.\nlinear_thermal_bridge_W_mK: Assumed linear thermal bridge properties for this structure_type.\nstructure_type_notes: Freeform notes about the structure type, or its assumed parameters.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"ventilation_space_heat_flow_direction: Represents different assumed heat flow directions in air gaps within structures, e.g. upwards, downwards, and horizontal. Used for creating an interpolated thermal resistance for air gaps of different widths, depending on the assumed heat flow direction.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"thermal_resistance_m2K_W: A SpineInterface Map linking the air gap width and assumed heat flow direction to a corresponding thermal resistance in [m2K/W].","category":"page"},{"location":"input/#Input-relationship-classes","page":"Required input data format","title":"Input relationship classes","text":"","category":"section"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"building_stock__building_type__building_period__location_id__heat_source: Number of existing buildings data for each (building_stock, building_type, building_period, location_id, heat_source).","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"number_of_buildings: The number of buildings of building_type, built during building_period in location_id, heated using heat_source of the building_stock dataset.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"building_type__location_id__building_period: Average gross-floor area data for each (building_type, location_id, building_period).","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"average_floor_area_m2: The average gross-floor area in [m2] of building_type in location_id built during building_period.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"building_type__location_id__frame_material: Frame material shares for each (building_type, location_id, frame_material).","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"share: The share of load-bearing frames of building_types in location_id made primarily out of frame_material.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"fenestration_source__building_type: Fenestration properties for (source, building_type).","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"U_value_W_m2K: The U-value of windows in [W/m2K] of building_type according to source.\nframe_area_fraction: The assumed frame area fraction (share of opaque surface area) of building_type windows according to source. \nnotes: Freeform notes regarding assumptions and sources relevant to the fenestration data.\nsolar_energy_transmittance: The solar energy transmittance of the glazing of building_type windows according to source.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"source__structure: Overall properties and descriptions of (source, structure).","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"design_U_W_m2K: The design U-value of the structure in [W/m2K]. Replaced with the minimum requirement in the building code at the time if not specified in the raw data sources.\nstructure_description: A freeform description of the structure.\nstructure_nodes: Freeform notes regarding assumptions concerning the structure.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"source__structure__building_type: Weights/frequencies of different structures for (source, structure, building_type).","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"building_type_weight: The assumed weight/frequency of a (source, structure) in building_type. Typically assumed as either 1 or 0 due to lack of more accurate data.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"source__structure__layer_id__structure_material: Properties of structural layers for (source, structure, layer_id, structure_material).","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"layer_load_bearing_thickness_mm: The minimum thickness of the layer_id when the structure is load-bearing in [mm].\nlayer_minimum_thickness_mm: The minimum thickness of the layer_id when the structure isn't load-bearing in [mm].\nlayer_notes: Freeform notes regarding any assumptions made concerning the layer_id.\nlayer_number: A number indicating the position of the layer_id within the structure. Zero indicates the primary thermal insulation layer, positive values indicate layers towards the exterior surface, and negative values indicate layers towards the interior surface. For internal structures, zeroth layer indicates the potentially load-bearing layer.\nlayer_tag: A brief tag indicating the primary purpose of the layer, e.g. thermal insulation, load-bearing, interior finish, etc.\nlayer_weight: A weight parameter used for describing heterogeneous structural layers, e.g. alternating wood furring and thermal insulation.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"structure__structure_type: Links different structures to a single structure_type.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"structure_material__frame_material: Maps each structure_material to a single frame_material.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"structure_type__ventilation_space_heat_flow_direction: Maps a ventilation_space_heat_flow_direction for each structure_type.","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"ventilation_source__building_type: Ventilation properties for (source, building_type):","category":"page"},{"location":"input/","page":"Required input data format","title":"Required input data format","text":"max_HRU_efficiency: The maximum ventilation heat recovery unit (HRU) efficiency for building_type found in literature according to source.\nmax_infiltration_factor: The maximum infiltration rate shape correction factor for building_type according to the Finnish building code and source.\nmax_n50_infiltration_rate_1_h: The maximum n50 infiltration rate for building_type in [1/h] found in literature according to source.\nmax_ventilation_rate_1_h: The maximum ventilation rate for building_type in [1/h] found in literature according to source.\nmin_HRU_efficiency: The minimum ventilation heat recovery unit (HRU) efficiency for building_type found in literature according to source.\nmin_infiltration_factor: The minimum infiltration rate shape correction factor for building_type according to the Finnish building code and source.\nmin_n50_infiltration_rate_1_h: The minimum n50 infiltration rate for building_type in [1/h] found in literature according to source.\nmin_ventilation_rate_1_h: The minimum ventilation rate for building_type in [1/h] found in literature according to source.\nnotes: Freeform notes about any assumptions regarding the fenestration properties for building_type according to source.","category":"page"},{"location":"main_program/#Data-processing-overview","page":"Data processing overview","title":"Data processing overview","text":"","category":"section"},{"location":"main_program/","page":"Data processing overview","title":"Data processing overview","text":"In this section, we'll go over the main idea behind the data processing workflow as implemented in the main program file process_datastore.jl. After the input data described in the above Required input data format section has been successfully imported into a Spine Datastore, the main program can be run to process the data into the format described by the following Output data format section.","category":"page"},{"location":"main_program/#Using-the-main-program","page":"Data processing overview","title":"Using the main program","text":"","category":"section"},{"location":"main_program/","page":"Data processing overview","title":"Data processing overview","text":"The process_datastore.jl main program is controlled using a number of command line arguments, the first two of which are required:","category":"page"},{"location":"main_program/","page":"Data processing overview","title":"Data processing overview","text":"<input_datastore_url>: The url pointing to the Spine Datastore containing the input data in the Required input data format.\n<output_datastore_url>: The url pointing to the Spine Datastore into which the output will be saved according to the Output data format.","category":"page"},{"location":"main_program/","page":"Data processing overview","title":"Data processing overview","text":"Furthermore, the following keyword arguments can be used to tweak how the data is processed.","category":"page"},{"location":"main_program/","page":"Data processing overview","title":"Data processing overview","text":"scramble=<false>: If set to true, will scramble all data in the Datastore.\nnum_lids=<Inf>: Can be used to set a maximum number of location_ids when processing the data for testing purposes.\nthermal_conductivity_weight=<1/2>: Can be used to tweak hot the thermal conductivity data is sampled for the structure_materials. The default value corresponds to the average of the minimum and maximum values in the input data.\ninterior_node_depth=<1/3>: Assumption regarding how deep the temperature node is located into the structures. The value indicates the depth as a fraction of the total thermal resistance between the interior surface of the structure, and the middle of the primary thermal insulation layer.\nvariation_period=<432000>: Period of variations as defined in EN ISO 13786:2017 Annex C. 5 days in second by default, based on EUReCA and IDA ESBO calibrations.","category":"page"},{"location":"main_program/#Main-program-workflow","page":"Data processing overview","title":"Main program workflow","text":"","category":"section"},{"location":"main_program/","page":"Data processing overview","title":"Data processing overview","text":"The steps performed by the main program can be summarized in the following steps:","category":"page"},{"location":"main_program/","page":"Data processing overview","title":"Data processing overview","text":"Process the given command line arguments.\nOpen the input Spine Datastore using Spine Interface, and run input data tests using run_structural_tests and run_statistical_tests, in order to ensure the input data makes sense.\nLimit the set of location_ids based on the given num_lids keyword argument.\nCreate the building_stock_year parameter based on parsing the names of the building_stock objects in the input data using add_building_stock_year!.\nCreate the building_stock_statistics output relationship class using the create_building_stock_statistics! function.\nCreate the structure_statistics output relationship class using the create_structure_statistics! function with the desired thermal_conductivity_weight, interior_node_depth, and variation_period keyword arguments.\nCreate the ventilation_and_fenestration_statistics output relationship class using the create_ventilation_and_fenestration_statistics! function.\nImport the newly created output relationship classes into the output Spine Datastore, scrambling them if the scramble=true keyword has been set.","category":"page"},{"location":"library/#Library","page":"Library","title":"Library","text":"","category":"section"},{"location":"library/","page":"Library","title":"Library","text":"Automatically generated documentation based on the docstrings in the codebase.","category":"page"},{"location":"library/#Index","page":"Library","title":"Index","text":"","category":"section"},{"location":"library/","page":"Library","title":"Library","text":"","category":"page"},{"location":"library/#Public","page":"Library","title":"Public","text":"","category":"section"},{"location":"library/","page":"Library","title":"Library","text":"This section lists all types and functions exported by the module.","category":"page"},{"location":"library/#Types","page":"Library","title":"Types","text":"","category":"section"},{"location":"library/","page":"Library","title":"Library","text":"","category":"page"},{"location":"library/#Functions","page":"Library","title":"Functions","text":"","category":"section"},{"location":"library/","page":"Library","title":"Library","text":"add_building_stock_year!\r\ncreate_building_stock_statistics!\r\ncreate_processed_statistics!\r\ncreate_structure_statistics!\r\ncreate_ventilation_and_fenestration_statistics!\r\nfilter_entity_class!\r\nimport_processed_data\r\nrun_structural_tests\r\nrun_statistical_tests\r\nscramble_parameter_data!","category":"page"},{"location":"library/#FinnishBuildingStockData.add_building_stock_year!","page":"Library","title":"FinnishBuildingStockData.add_building_stock_year!","text":"add_building_stock_year!(mod::Module)\n\nAdd the building_stock_year parameter for the building_stock objects in mod.\n\nCurrently, the building_stock_year is parsed from the name of the building_stock objects, assuming the names are formatted like <NAME>_<YEAR>.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.create_building_stock_statistics!","page":"Library","title":"FinnishBuildingStockData.create_building_stock_statistics!","text":"create_building_stock_statistics!(mod::Module;\n    building_stock=anything,\n    building_type=anything,\n    building_period=anything,\n    location_id=anything,\n    heat_source=anything,\n)\n\nCreate the building_stock_statistics RelationshipClass in mod to house the building stock forecasts.\n\nBased on the building_stock__building_type__building_period__location_id__heat_source relationship, but with some renaming to make the data more flexible. Furthermore, includes the average_floor_area_m2 data as well. Optional keyword arguments can be used to limit the scope of the calculations, and the mod keyword is used to tweak the Module scope of the calculations.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.create_processed_statistics!","page":"Library","title":"FinnishBuildingStockData.create_processed_statistics!","text":"create_processed_statistics!(\n    mod::Module,\n    num_lids::Float64,\n    thermal_conductivity_weight::Float64,\n    interior_node_depth::Float64,\n    variation_period::Float64,\n)\n\nCreate processed statistics in mod based on the contents of the input datastore.\n\nThe arguments are used to tweak details regarding the processing:\n\nnum_lids: Number of location_id objects included in the resulting datastore (e.g. for testing).\nthermal_conductivity_weight: How thermal conductivity of the materials is sampled.\ninterior_node_depth: How deep the interior thermal node is positioned within the structure.\nvariation_period: \"Period of variations\" as defined in EN ISO 13786:2017 Annex C.\n\nEssentially performs the following steps:\n\nLimit location_ids based on the given num_lids.\nCall add_building_stock_year! to parse years from building_stock names.\nCall create_building_stock_statistics! to create processed building stock statistics.\nCall create_structure_statistics! to create processed structural statistics.\nCall create_ventilation_and_fenestration_statistics! to create processed ventilation and fenestration statistics.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.create_structure_statistics!","page":"Library","title":"FinnishBuildingStockData.create_structure_statistics!","text":"create_structure_statistics!(\n    mod::Module;\n    building_type=anything,\n    building_period=anything,\n    location_id=anything,\n    thermal_conductivity_weight::Float64,\n    interior_node_depth::Float64,\n    variation_period::Float64,\n)\n\nCreate the structure_statistics RelationshipClass to house the structural data from mod.\n\nThe keywords can be used to filter produced data, as well as tweak how the different material properties are weighted: 0 uses the minimum values, and 1 uses the maximum values. interior_node_depth is used to calculate the thermal resistance into the structure node, and variation_period affects the effective thermal mass accounting for surface resistance.\n\nEssentially, this function performs the following steps:\n\nCreates the is_load_bearing parameter via _add_light_wall_types_and_is_load_bearing!\nForms all BuildingStructures using _form_building_structures\nCreates and returns the structure_statistics RelationshipClass, with its parameters calculated using _structure_type_parameter_values\n\nThe RelationshipClass stores the following structural parameters:\n\neffective_thermal_mass_J_m2K: Effective thermal mass of the structure.\nlinear_thermal_bridges_W_mK: Linear thermal bridges of the structure.\ndesign_U_value_W_m2K: Design U-value of the structure, based on U-values in the input data, and used mainly as a reference for total_U_value_W_m2K.\ntotal_U_value_W_m2K: Estimated total U-value through the structure, accounting for both ambient air and ground interaction. Used mainly as a comparison against design_U_value_W_m2K.\nexternal_U_value_to_ambient_air_W_m2K: U-value portion from inside the structure into ambient air.\nexternal_U_value_to_ground_W_m2K: U-value portion from inside the structure into the ground.\ninternal_U_value_to_structure_W_m2K: U-value portion from the interior air into the structure.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.create_ventilation_and_fenestration_statistics!","page":"Library","title":"FinnishBuildingStockData.create_ventilation_and_fenestration_statistics!","text":"create_ventilation_and_fenestration_statistics!(\n    mod::Module;\n    building_type=anything,\n    location_id=anything,\n    building_period=anything,\n    ventilation_rate_weight::Float64=0.5,\n    n50_infiltration_rate_weight::Float64=0.5,\n    infiltration_factor_weight::Float64=0.5,\n    HRU_efficiency_weight::Float64=0.5,\n    lookback_if_empty::Int64=10,\n    max_lookbacks::Int64=20,\n)\n\nCreate the ventilation_and_fenestration_statistics RelationshipClass to house ventilation and fenestration data from mod.\n\nThe ObjectClass keywords can be used to filter the processed data, while the weight keywords can be used to tweak how the properties are sampled: 0 uses the minimum value, and 1 uses the maximum value. The lookback keywords control how historical data is backtracked if no data is found for a building_period.\n\nThe RelationshipClass stores the following ventilation and fenestration parameters:\n\nventilation_rate_1_h: Calculated using mean_ventilation_rate\ninfiltration_rate_1_h: Calculated using mean_infiltration_rate\nHRU_efficiency: Calculated using mean_hru_efficiency\nwindow_U_value_W_m2K: Calculated using mean_window_U_value\ntotal_normal_solar_energy_transmittance: Calculated using mean_total_normal_solar_energy_transmittance\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.filter_entity_class!","page":"Library","title":"FinnishBuildingStockData.filter_entity_class!","text":"filter_entity_class!(oc::ObjectClass; kwargs...)\n\nFilters and ObjectClass or a RelationshipClass to only contain the desired objects or relationships. Separate methods for ObjectClass and RelationshipClass.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.import_processed_data","page":"Library","title":"FinnishBuildingStockData.import_processed_data","text":"import_processed_data(url_out::String; scramble_data = false, mod::Module = Main)\n\nImports the processed data from module mod into the datastore at url_out.\n\nThe mod keyword can be used to tweak which Module the data is accessed from. The scramble_data keyword can be used to scramble the database if needed.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.run_structural_tests","page":"Library","title":"FinnishBuildingStockData.run_structural_tests","text":"run_structural_tests(; limit::Number = Inf, mod::Module = Main)\n\nRun all structural data tests for Module mod.\n\nNote that you must first open a database via using_spinedb(db_url, mod)!\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.run_statistical_tests","page":"Library","title":"FinnishBuildingStockData.run_statistical_tests","text":"run_statistical_tests(;limit::Number=Inf, mod::Module = Main)\n\nRun all statistical data tests for Module mod.\n\nNote that you must first open a database via using_spinedb(db_url, mod).\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.scramble_parameter_data!","page":"Library","title":"FinnishBuildingStockData.scramble_parameter_data!","text":"scramble_parameter_data!(oc::ObjectClass)\n\nScrambles all parameter data in an object or relationship class. Methods are provided for object and relationship classes separately.\n\n\n\n\n\n","category":"function"},{"location":"library/#Internals","page":"Library","title":"Internals","text":"","category":"section"},{"location":"library/","page":"Library","title":"Library","text":"This section lists all the internal types and functions not exported by the module.","category":"page"},{"location":"library/#Types-2","page":"Library","title":"Types","text":"","category":"section"},{"location":"library/","page":"Library","title":"Library","text":"FinnishBuildingStockData.BuildingStructure\r\nFinnishBuildingStockData.Layer\r\nFinnishBuildingStockData.Property\r\nFinnishBuildingStockData.PropertyLayer","category":"page"},{"location":"library/#FinnishBuildingStockData.BuildingStructure","page":"Library","title":"FinnishBuildingStockData.BuildingStructure","text":"BuildingStructure\n\nA struct representing a structure with all its important properties.\n\nContains the following fields:\n\nname::Symbol: Name of the structure, combined from the source and structure identifiers.\ntype::Object: The type of the structure, e.g. exterior_wall, roof, or light_partition_wall.\nyear::Float64: Year of the source including this structure, after which the structure is assumed to be in use.\ninternal::Bool: A flag indicating whether the structure is an internal structure, as opposed to envelope structures.\nloadbearing::Bool A flag indicating whether the structure can be load-bearing. Determined via calculate_structure_properties.\nload_bearing_materials::Array{Object,1}: An array of the load-bearing materials used in this structure. Determined via calculate_structure_properties.\ndesign_U_value::Property: The original design U-value [W/m2K] of the structure in the raw input data.\nU_value_dict::Dict{Symbol,Property}: Holds all the different U-values [W/m2K] calcualted by calculate_structure_properties.\neffective_thermal_mass::Property: Effective thermal mass of the structure [J/m2K], determined via calculate_structure_properties.\nlinear_thermal_bridges::Property: Linear thermal bridges [W/mK] of the structure based on raw input data.\nbuilding_types::Array{Object,1}: List of building_types employing this structure.\n\n\n\n\n\n","category":"type"},{"location":"library/#FinnishBuildingStockData.Layer","page":"Library","title":"FinnishBuildingStockData.Layer","text":"Layer\n\nA struct representing a structural layer.\n\nContains the following fields:\n\nnumber::Int: Indicates the depth of the layer within the structure. Negative values indicate layers inside the primary thermal insulation layer, 0 indicates the primary thermal insulation layer, and positive values indicate layers outside the primary insulation layer.\ntag::Symbol: A tag explaining the purpose of each layer.\nid::Object: Unique identifier for each structural layer.\nmaterial::Object: The material of the structural layer.\n\n\n\n\n\n","category":"type"},{"location":"library/#FinnishBuildingStockData.Property","page":"Library","title":"FinnishBuildingStockData.Property","text":"Property\n\nA convenience struct handling minimum and load-bearing properties of structural layers.\n\nContains the following fields:\n\nmin::Real: The minimum property of the structural layer when it is non-load-bearing.\nloadbering::Real: The minimum load-bearing when it is load-bearing.\n\n\n\n\n\n","category":"type"},{"location":"library/#FinnishBuildingStockData.PropertyLayer","page":"Library","title":"FinnishBuildingStockData.PropertyLayer","text":"PropertyLayer\n\nA struct storing the Propertys of structural layers, used for calculations.\n\nContains the following fields:\n\nnumber::Int: Indicates the depth of the layer within the structure. Negative values indicate layers inside the primary thermal insulation layer, 0 indicates the primary thermal insulation layer, and positive values indicate layers outside the primary insulation layer.\nR::Property: The thermal resistance of the structural layer in [m2K/W], both for load-bearing and non-load-bearing variants of the layer.\nC::Property: The heat capacity of the structural layer in [J/m2K], both for load-bearing and non-load-bearing variants of the layer.\ninterior::Bool: A flag whether this layer lies between the interior surface and the primary thermal insulation layer of the structure.\nexterior::Bool: A flag whether this layer lies between the exterior surface and the primary thermal insulation layer of the structure.\nground::Bool: A flag whether this layer lies between the ground and the primary thermal insulation layer of the structure.\n\n\n\n\n\n","category":"type"},{"location":"library/#Functions-2","page":"Library","title":"Functions","text":"","category":"section"},{"location":"library/","page":"Library","title":"Library","text":"FinnishBuildingStockData._add_light_wall_types_and_is_load_bearing!\r\nFinnishBuildingStockData._average_gross_floor_area_m2_per_building_values\r\nFinnishBuildingStockData._check\r\nFinnishBuildingStockData._filter_relevant_building_structures\r\nFinnishBuildingStockData._filter_relevant_sources\r\nFinnishBuildingStockData._form_building_structures\r\nFinnishBuildingStockData._map_structure_types\r\nFinnishBuildingStockData._relationship_and_unique_entries\r\nFinnishBuildingStockData._scramble_parameter_value\r\nFinnishBuildingStockData._scramble_value\r\nFinnishBuildingStockData._structure_type_parameter_values\r\nFinnishBuildingStockData._thermal_resistance\r\nFinnishBuildingStockData.account_for_surface_resistance_in_effective_thermal_mass!\r\nFinnishBuildingStockData.calculate_ground_resistance_m2K_W\r\nFinnishBuildingStockData.calculate_structure_properties\r\nFinnishBuildingStockData.density\r\nFinnishBuildingStockData.filtered_parameter_values\r\nFinnishBuildingStockData.isloadbearing\r\nFinnishBuildingStockData.layer_heat_capacity\r\nFinnishBuildingStockData.layer_number_weight\r\nFinnishBuildingStockData.layer_thermal_resistance\r\nFinnishBuildingStockData.layers_with_properties\r\nFinnishBuildingStockData.mean_hru_efficiency\r\nFinnishBuildingStockData.mean_infiltration_rate\r\nFinnishBuildingStockData.mean_total_normal_solar_energy_transmittance\r\nFinnishBuildingStockData.mean_ventilation_rate\r\nFinnishBuildingStockData.mean_window_U_value\r\nFinnishBuildingStockData.order_layers\r\nFinnishBuildingStockData.specific_heat_capacity\r\nFinnishBuildingStockData.test_building_period\r\nFinnishBuildingStockData.test_building_stock\r\nFinnishBuildingStockData.test_building_stock__building_type__building_period__location_id__heat_source\r\nFinnishBuildingStockData.test_building_type__location_id__building_period\r\nFinnishBuildingStockData.test_building_type__location_id__frame_material\r\nFinnishBuildingStockData.test_fenestration_source__building_type\r\nFinnishBuildingStockData.test_frame_material\r\nFinnishBuildingStockData.test_heat_source\r\nFinnishBuildingStockData.test_layer_id\r\nFinnishBuildingStockData.test_location_id\r\nFinnishBuildingStockData.test_source\r\nFinnishBuildingStockData.test_source__structure\r\nFinnishBuildingStockData.test_source__structure__building_type\r\nFinnishBuildingStockData.test_source__structure__layer_id__structure_material\r\nFinnishBuildingStockData.test_statistical_building_type\r\nFinnishBuildingStockData.test_structural_building_type\r\nFinnishBuildingStockData.test_structural_frame_material\r\nFinnishBuildingStockData.test_structural_layers\r\nFinnishBuildingStockData.test_structure\r\nFinnishBuildingStockData.test_structure__structure_type\r\nFinnishBuildingStockData.test_structure_material\r\nFinnishBuildingStockData.test_structure_material__frame_material\r\nFinnishBuildingStockData.test_structure_type\r\nFinnishBuildingStockData.test_ventilation_source__building_type\r\nFinnishBuildingStockData.test_structure_type__ventilation_space_heat_flow_direction\r\nFinnishBuildingStockData.test_ventilation_space_heat_flow_direction\r\nFinnishBuildingStockData.thermal_conductivity\r\nFinnishBuildingStockData.total_building_type_weight","category":"page"},{"location":"library/#FinnishBuildingStockData._add_light_wall_types_and_is_load_bearing!","page":"Library","title":"FinnishBuildingStockData._add_light_wall_types_and_is_load_bearing!","text":"_add_light_wall_types_and_is_load_bearing!(; mod::Module = Main)\n\nAdd new structure_types for non-load-bearing exterior and partition walls, as well as a new parameter is_load_bearing for whether the structure type is load-bearing.\n\nNote that this function operates in Module mod, set to Main by default!\n\nEssentially, all the structure types in the raw data are assumed to be load-bearing. This function creates the light_exterior_wall and light_partition_wall structure_types assuming identical properties to their load-bearing counterparts, except that the :is_load_bearing flag is set to false.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._average_gross_floor_area_m2_per_building_values","page":"Library","title":"FinnishBuildingStockData._average_gross_floor_area_m2_per_building_values","text":"_average_gross_floor_area_m2_per_building_values(;\n    building_stock=anything,\n    building_type=anything,\n    building_period=anything,\n    location_id=anything,\n    heat_source=anything,\n    mod::Module = Main\n)\n\nCreate the average_gross_floor_area_m2_per_building parameter values for the building_stock_statistics RelationshipClass.\n\nEssentially, this function loops over all (building_stock, building_type, building_period, location_id, heat_source) in the data, and fetches the corresponding average_floor_area_m2(building_type, location_id, building_period) data. The calculations can be limited to only the desired object classes by using the optional keyword arguments, and the mod keyword is used to tweak the Module scope of the calculations.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._check","page":"Library","title":"FinnishBuildingStockData._check","text":"_check(cond::Bool, msg::String)\n\nCheck the condition cond, and print msg if false.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._filter_relevant_building_structures","page":"Library","title":"FinnishBuildingStockData._filter_relevant_building_structures","text":"_filter_relevant_building_structures(\n    building_structures::Array{BuildingStructure,1},\n    building_type::Object,\n    building_period::Object,\n    structure_type::Object,\n    st_map::Dict;\n    lookback_if_empty::Int64 = 10,\n    max_lookbacks::Int64 = 20,\n    mod::Module = Main,\n)\n\nFind the BuildingStructures matching the provided criteria from data in mod.\n\nEssentially, this function returns a filtered Array of BuildingStructures, that match the desired structure_type, building_type, and building_period. If nothing is found, relaxes the building_period period_start by lookback_if_empty = 10 and tries again. If nothing is found after max_lookbacks = 20, throws an error.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._filter_relevant_sources","page":"Library","title":"FinnishBuildingStockData._filter_relevant_sources","text":"_filter_relevant_sources(\n    building_period::Object,\n    relationship_class::SpineInterface.RelationshipClass;\n    lookback_if_empty::Int64 = 10,\n    max_lookbacks::Int64 = 20;\n    mod::Module = Main\n)\n\nFinds the sources matching the provided building_period for the desired relationship_class.\n\nIf nothing is found, relaxes the building_period start by lookback_if_empty, and tries again until max_lookbacks is reached. The mod keyword defines the Module from which the data is accessed.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._form_building_structures","page":"Library","title":"FinnishBuildingStockData._form_building_structures","text":"_form_building_structures(;\n    thermal_conductivity_weight::Float64,\n    interior_node_depth::Float64,\n    variation_period::Float64,\n    mod::Module = Main,\n)\n\nForms the BuildingStructure for each structure in Module mod.\n\nEssentially, loops over each (source, structure) in the raw input data, and creates a corresponding BuildingStructure using the desired properties. The keywords can be used to tweak material properties between their min and max values. Note that only structures with total_building_type_weight greater than zero are handled to avoid unnecessary calculations.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._map_structure_types","page":"Library","title":"FinnishBuildingStockData._map_structure_types","text":"_map_structure_types(is_load_bearing::SpineInterface.Parameter; mod::Module = Main)\n\nMaps structure_type to its load-bearing variant. Only light structures are affected.\n\nNote that this function operates in Module mod, set to Main by default!\n\nEssentially, returns a Dict mapping each structure_type to itself, with the exception of the light_exterior_wall and light_partition_wall being mapped to exterior_wall and partition_wall repsectively.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._relationship_and_unique_entries","page":"Library","title":"FinnishBuildingStockData._relationship_and_unique_entries","text":"_relationship_and_unique_entries(relationship::SpineInterface.RelationshipClass, fields::Symbol)\n\nGets the unique entries in the relationship with the desired fields.\n\nReturns a Pair with the name of the relationship as a String, and the entries in an Array.\n\n\n\n\n\n_relationship_and_unique_entries(relationship::SpineInterface.RelationshipClass, fields::NTuple{N Symbol})\n\nGets the unique entries in the relationship with the desired fields.\n\nReturns a Pair with the name of the relationship as a String, and the entries in an Array.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._scramble_parameter_value","page":"Library","title":"FinnishBuildingStockData._scramble_parameter_value","text":"_scramble_parameter_value(val::AbstractParameterValue)\n\nScramble the values of a parameter. Different methods employed for different types of AbstractParameterValue.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._scramble_value","page":"Library","title":"FinnishBuildingStockData._scramble_value","text":"_scramble_value(val)\n\nScramble a value. Different methods are employed for different types encountered. If a method isn't specified, the value is simply omitted entirely.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._structure_type_parameter_values","page":"Library","title":"FinnishBuildingStockData._structure_type_parameter_values","text":"_structure_type_parameter_values(\n    building_structures::Array{BuildingStructure,1},\n    inds::NamedTuple,\n    is_load_bearing::SpineInterface.Parameter;\n    mod::Module = Main,\n)\n\nAggregate the building_structures parameters from mod into a parameter value Dict.\n\nNOTE! The share parameter is never allowed to be zero, with a 1e-6 always added to the share. Adding 1e-6 to the share means that an even mix of materials is assumed if no meaningful data is found.\n\nEssentially, this function performs the following steps:\n\nMaps structure_type into its load-bearing variant via _map_structure_types.\nFilters out irrelevant structures based in inds using _filter_relevant_building_structures.\nCalculates the normalized weights of the relevant structures based on the (building_type, location_id, frame_material) frame material share data.\nCalculates the aggregated average properties of the relevant structures, weighted using the normalized frame material weights.\n\nYielding the following weighted average structural parameters:\n\neffective_thermal_mass_J_m2K: Effective thermal mass of the structure.\nlinear_thermal_bridges_W_mK: Linear thermal bridges of the structure.\ndesign_U_value_W_m2K: Design U-value of the structure, based on U-values in the input data, and used mainly as a reference for total_U_value_W_m2K.\ntotal_U_value_W_m2K: Estimated total U-value through the structure, accounting for both ambient air and ground interaction. Used mainly as a comparison against design_U_value_W_m2K.\nexternal_U_value_to_ambient_air_W_m2K: U-value portion from inside the structure into ambient air.\nexternal_U_value_to_ground_W_m2K: U-value portion from inside the structure into the ground.\ninternal_U_value_to_structure_W_m2K: U-value portion from the interior air into the structure.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData._thermal_resistance","page":"Library","title":"FinnishBuildingStockData._thermal_resistance","text":"_thermal_resistance(\n    source::Object,\n    structure::Object,\n    layer::Layer,\n    thickness::SpineInterface.Parameter,\n    R_itp::Interpolations.Extrapolation;\n    weight::Float64 = 0.5,\n    mod::Module = Main,\n)\n\nCalculate the thermal resistance [W/m2K] of a single homogeneous structural layer.\n\nFor regular material layers, the thermal resistance is calculated as:\n\nR = fractextitthicknesstextitthermal conductivity\n\nbut for layers with ventilation space as the material, linearly interpolated tabulated values from the raw input data are used instead. The weight keyword can be used to tweak the thermal conductivity of the materials between their min and max values.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.account_for_surface_resistance_in_effective_thermal_mass!","page":"Library","title":"FinnishBuildingStockData.account_for_surface_resistance_in_effective_thermal_mass!","text":"account_for_surface_resistance_in_effective_thermal_mass!(\n    C::Property,\n    surface_resistance::Float64,\n    variation_period::Float64\n)\n\nAccount for the surface_resistance and the assumed variation_period (\"period of the variations\").\n\nThe effective thermal mass is calculated according to EN ISO 13786:2017 Annex C.2.4 Effective thickness method. When used for a Property, calculates the effective thermal mass separately for both min and loadbearing values.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.calculate_ground_resistance_m2K_W","page":"Library","title":"FinnishBuildingStockData.calculate_ground_resistance_m2K_W","text":"calculate_ground_resistance_m2K_W(Rf::Float64, Rp::Float64)\n\nCalculate the effective ground thermal resistance [m2K/W].\n\nThe calculation is based on the simple method proposed by K.Kissock in: Simplified Model for Ground Heat Transfer from Slab-on-Grade Buildings, (c) 2013 ASHRAE, where:\n\nRf stands for the total thermal resistance of the floor structures.\nRp stands for the additional ground perimeter insulation thermal resistance (assumed 0 since no data).\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.calculate_structure_properties","page":"Library","title":"FinnishBuildingStockData.calculate_structure_properties","text":"calculate_structure_properties(\n    source::Object,\n    structure::Object;\n    thermal_conductivity_weight::Float64,\n    interior_node_depth::Float64,\n    variation_period::Float64,\n    mod::Module = Main,\n)\n\nCalculate the properties of (source, structure) from mod based on the raw structural data.\n\nThis function calculates the following properties for each (source, structure):\n\nU-value [W/m2K] from the interior into the structure itself.\nU-value [W/m2K] from the structure into exterior air.\nU-value [W/m2K] from the structure into ground.\nTotal U-value [W/m2K] through the structure from interior to exterior (mainly for cross-referencing purposes).\nEffective thermal mass [J/m2K] of the structure (calculated from layers inside the primary insulation).\n\nNote that for internal structure types, all structural layers are included in the effective thermal mass!\n\nThe U-values are calculated as the inverse of the total thermal resistance of the structural layers:\n\nU = R_texttotal^-1 = left( sum_l in textlayers R_l right)^-1\n\nThe zeroth layer is considered as the boundary between internal layers and external layers, and contains the primary thermal insulation layer for envelope structures. As such, half of the zeroth layer is considered as an internal layer, and the other half as an external layer.\n\nIf a structure contains an exterior finish or crawl space layer, the U-value to the exterior air will be calculated until that layer. If a structure contains the ground layer, the U-value to the ground will be calculated until that layer. If a structure contains both (e.g. base floors with crawl spaces), both U-values will be calculated separately, and the total U-value will be calculated based on them, as if they were parallel thermal resistances.\n\nAll the above parameters are calculated separately for the non-load-bearing and load-bearing variants of the structure.\n\nThe keywords can be used to tweak material properties between their min and max values, the assumed \"depth\" of the temperature node, and the \"period of variations\" as explained in EN ISO 13786:2017.\n\nEssentially, this function performs the following steps:\n\nLinearly interpolate the thermal resistance of ventilation spaces based on the raw input data.\nCalculate the properties of the structural layers using layers_with_properties.\nCheck if the structure can be load-bearing using isloadbearing.\nCalculate the total effective thermal mass of the structure by summing the effective thermal mass of the interior layers.\nCalculate the thermal resistances and U-values both through the structure, as well as within the structure, while accounting for surface resistances in the raw input data.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.density","page":"Library","title":"FinnishBuildingStockData.density","text":"density(material::Object; mod::Module = Main)\n\nReturn the average density of the material in [kg/m3].\n\nCalculated as a simple average based on the minimum_density_kg_m3 and maximum_density_kg_m3 parameters in the input data as\n\nrho_textmean = fracrho_textmin + rho_textmax2\n\nThe mod keyword is used to tweak the Module from which the parameters are read.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.filtered_parameter_values","page":"Library","title":"FinnishBuildingStockData.filtered_parameter_values","text":"filtered_parameter_values(oc::ObjectClass; kwargs...)\n\nFilters the parameter_values field of an ObjectClass or a RelationshipClass. Methods for the entitity classes are provided separately.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.isloadbearing","page":"Library","title":"FinnishBuildingStockData.isloadbearing","text":"isloadbearing(source::Object, structure::Object; mod::Module = Main)\n\nCheck if structure from mod can be load-bearing and return a Bool.\n\nA structure is interpreted as potentially load-bearing, if any of its layers has a layer_load_bearing_thickness_mm value in the raw input data.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.layer_heat_capacity","page":"Library","title":"FinnishBuildingStockData.layer_heat_capacity","text":"layer_heat_capacity(\n    source::Object,\n    structure::Object,\n    layers::Array{Layer,1};\n    mod::Module = Main\n)\n\nCalculate the effective heat capacity [J/m2K] of a potentially heterogeneous structural layer as:\n\nC = sum_i in textoverlapping textitlayer weight(i) * textitspecific heat capacity(i) * textitdensity(i) * textitthickness(i)\n\nReturns a Property with the effective heat capacity for the minimum thickness min, and the effective heat capacity for the load-bearing thickness loadbearing. The thermal capacity is assumed to be zero if it cannot be calculated using the parameters (e.g. when thickness is zero). The mod keyword defines the Module from which the data is accessed.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.layer_number_weight","page":"Library","title":"FinnishBuildingStockData.layer_number_weight","text":"layer_number_weight(layer::Union{Layer,PropertyLayer})\n\nReturns 0.5 if layer.num == 0, otherwise returns 1.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.layer_thermal_resistance","page":"Library","title":"FinnishBuildingStockData.layer_thermal_resistance","text":"layer_thermal_resistance(\n    source::Object,\n    structure::Object,\n    layers::Array{Layer,1},\n    R_itp::Interpolations.Extrapolation;\n    weight::Float64 = 0.5\n    mod::Module = Main\n)\n\nCalculate the thermal resistance [m2K/W] of a potentially heterogeneous structural layer as:\n\nR = left(sum_i in textoverlapping fractextitlayer weight(i)*textitthermal conductivity(i)textitthickness(i) right)^-1\n\nReturns a Property with the thermal resistance for the minimum thickness min, and the thermal resistance for the load-bearing thickness loadbearing. The thermal resistance is assumed to be zero if it cannot be calculated using the parameters (e.g. when thickess is zero). The weight keyword can be used to tweak the thermal conductivity of the materials between their min and max values. The mod keyword defines the Module from which the data is accessed.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.layers_with_properties","page":"Library","title":"FinnishBuildingStockData.layers_with_properties","text":"layers_with_properties(\n    source::Object,\n    structure::Object,\n    R_itp::Interpolations.Extrapolation;\n    thermal_conductivity_weight::Float64\n    mod::Module = Main,\n)\n\nCalculate the properties of the structural layers while combining overlapping layers.\n\nReturns an array of unique structure_materials for the load-bearing layers, as well as an array of the processed PropertyLayers. The keywords can be used to tweak material properties between their min and max values, while the mod keyword defines the Module from which the data is accessed.\n\nEssentially, this function performs the following steps:\n\nOrder and create the Layers in the structure using order_layers.\nIdentify the load bearing materials.\nIdentify whether the structure is ground-coupled or not.\nCalculate the layer properties using layer_thermal_resistance and layer_heat_capacity.\nCreate the final array of PropertyLayers using the calculated layer properties.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.mean_hru_efficiency","page":"Library","title":"FinnishBuildingStockData.mean_hru_efficiency","text":"mean_hru_efficiency(\n    building_period::Object,\n    building_type::Object;\n    weight::Float64=0.5,\n    lookback_if_empty::Int64 = 10,\n    max_lookbacks::Int64 = 20,\n    mod::Module = Main,\n)\n\nCalculate the mean Heat Recovery Unit (HRU) efficiency for a (building_period, building_type) based on relevant raw data.\n\nThe weight keyword can be used to tweak how the HRU efficiency is sampled: 0 uses the min_HRU_efficiency, and 1 uses the max_HRU_efficiency. The lookback keywords control how historical data is backtracked if no data is found for a building_period. The mod keyword defines the Module from which the data is accessed.\n\nEssentially, this function performs the following steps:\n\nFilter out irrelevant sources using _filter_relevant_sources.\nCalculate the mean HRU efficiency across the relevant sources as:\n\neta_textmean = fracsum_s in textrelevant sources w eta_textmaxs + (1-w) eta_textminssum_s in textrelevant sources 1 \n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.mean_infiltration_rate","page":"Library","title":"FinnishBuildingStockData.mean_infiltration_rate","text":"mean_infiltration_rate(\n    building_period::Object,\n    building_type::Object;\n    n50_weight::Float64=0.5,\n    factor_weight::Float64=0.5,\n    lookback_if_empty::Int64 = 10,\n    max_lookbacks::Int64 = 20,\n    mod::Module = Main,\n)\n\nCalculate the mean infiltration rate [1/h] for a (building_period, building_type) based on relevant raw data.\n\nThe weight keywords can be used to tweak how the infiltration rate and infiltration factor are sampled: 0 uses the minimum, and 1 uses the maximum parameter values. The lookback keywords control how historical data is backtracked if no data is found for a building_period. The mod keyword defines the Module from which the data is accessed.\n\nNOTE! The calculation of the infiltration factor is based on the convention in the Finnish building code. The convention uses a n50 infiltration rate corrected using an infiltration factor accounting for the typical number of storeys in the building type in question.\n\nEssentially, this function performs the following steps:\n\nFilter out irrelevant sources using _filter_relevant_sources.\nCalculate the mean infiltration rate [1/h] across the relevant sources as:\n\nr_textinfmean = fracsum_s in textrelevant sources w_textn50 r_textinfmaxs + (1-w_textn50) r_textinfminssum_s in textrelevant sources w_textfactor F_textmax + (1-w_textfactor) F_textmin sum_s in textrelevant sources 1 \n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.mean_total_normal_solar_energy_transmittance","page":"Library","title":"FinnishBuildingStockData.mean_total_normal_solar_energy_transmittance","text":"mean_total_normal_solar_energy_transmittance(\n    building_period::Object,\n    building_type::Object;\n    lookback_if_empty::Int64 = 10,\n    max_lookbacks::Int64 = 20,\n    mod::Module = Main,\n)\n\nCalculate the mean total normal solar energy transmittance for a (building_period, building_type) based on raw data. In this case, \"total\" means that both the properties of glazing and window frames are accounted for, while \"normal\" means that this value is strictly applicable only to solar radiation directly perpendicular to the window.\n\nThe lookback keywords control how historical data is backtracked if no data is found for a building_period. The mod keyword defines the Module from which the data is accessed.\n\nEssentially, this function performs the following steps:\n\nFilter out irrelevant sources using _filter_relevant_sources.\nCalculate the mean total normal solar energy transmittance of the windows across the relevant sources accounting for the frame area fraction as:\n\ng_textmean = fracsum_s in textrelevant sources (1-f) gsum_s in textrelevant sources 1 \n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.mean_ventilation_rate","page":"Library","title":"FinnishBuildingStockData.mean_ventilation_rate","text":"mean_ventilation_rate(\n    building_period::Object,\n    building_type::Object;\n    weight::Float64=0.5,\n    lookback_if_empty::Int64 = 10,\n    max_lookbacks::Int64 = 20,\n    mod::Module = Main\n)\n\nCalculate the mean ventilation rate [1/h] for a (building_period, building_type) based on relevant raw data.\n\nThe weight keyword can be used to tweak how the ventilation rate is sampled: 0 uses the min_ventilation_rate_1_h, and 1 uses the max_ventilation_rate_1_h. The lookback keywords control how historical data is backtracked if no data is found for a building_period. The mod keyword defines the Module from which the data is accessed.\n\nEssentially, this function performs the following steps:\n\nFilter out irrelevant sources using _filter_relevant_sources.\nCalculate the mean ventilation rate [1/h] across the relevant sources as:\n\nr_textvenmean = fracsum_s in textrelevant sources w r_textvenmaxs + (1-w) r_textvenminssum_s in textrelevant sources 1 \n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.mean_window_U_value","page":"Library","title":"FinnishBuildingStockData.mean_window_U_value","text":"mean_window_U_value(\n    building_period::Object,\n    building_type::Object;\n    lookback_if_empty::Int64 = 10,\n    max_lookbacks::Int64 = 20,\n    mod::Module = Main,\n)\n\nCalculate the mean window U-value [W/m2K] for a (building_period, building_type) based on relevant raw data.\n\nThe lookback keywords control how historical data is backtracked if no data is found for a building_period. The mod keyword defines the Module from which the data is accessed.\n\nEssentially, this function performs the following steps:\n\nFilter out irrelevant sources using _filter_relevant_sources.\nCalculate the mean window U-value [W/m2K] across the relevant sources as:\n\nU_textmean = fracsum_s in textrelevant sources U_textmaxs + U_textmins2 sum_s in textrelevant sources 1 \n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.order_layers","page":"Library","title":"FinnishBuildingStockData.order_layers","text":"order_layers(source::Object, structure::Object; mod::Module = Main)\n\nOrder the structural layers of (source, structure) from mod according to the layer_numbers.\n\nReturns an array of Layers, sorted according to the layer_number parameter, as well as the unique array of layer_numbers.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.specific_heat_capacity","page":"Library","title":"FinnishBuildingStockData.specific_heat_capacity","text":"specific_heat_capacity(material::Object; mod::Module = Main)\n\nReturn the average specific heat capacity of the material in [J/kgK].\n\nCalculated as a simple average based on the minimum_specific_heat_capacity_J_kgK and maximum_specific_heat_capacity_J_kgK parameters in the input data as\n\nc_textmean = fracc_textmin + c_textmax2\n\nThe mod keyword is used to tweak the Module from which the parameters are read.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_building_period","page":"Library","title":"FinnishBuildingStockData.test_building_period","text":"test_building_period(;limit::Number=Inf, mod::Module = Main)\n\nRun tests for the building_period objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_building_stock","page":"Library","title":"FinnishBuildingStockData.test_building_stock","text":"test_building_stock(;limit::Number=Inf, mod::Module = Main)\n\nRun tests for the building_stock objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_building_stock__building_type__building_period__location_id__heat_source","page":"Library","title":"FinnishBuildingStockData.test_building_stock__building_type__building_period__location_id__heat_source","text":"test_building_stock__building_type__building_period__location_id__heat_source(;\n    limit::Number=Inf,\n    mod::Module = Main\n)\n\nRun tests for the building_stock__building_type__building_period__location_id__heat_source relationhip.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_building_type__location_id__building_period","page":"Library","title":"FinnishBuildingStockData.test_building_type__location_id__building_period","text":"test_building_type__location_id__building_period(;\n    limit::Number=Inf,\n    mod::Module = Main\n)\n\nRun tests for the building_type__location_id__building_period relationship.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_building_type__location_id__frame_material","page":"Library","title":"FinnishBuildingStockData.test_building_type__location_id__frame_material","text":"test_building_type__location_id__frame_material(;\n    limit::Number=Inf,\n    mod::Module = Main\n)\n\nRun tests for the building_type__location_id__frame_material relationship.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_fenestration_source__building_type","page":"Library","title":"FinnishBuildingStockData.test_fenestration_source__building_type","text":"test_fenestration_source__building_type(; limit::Number = Inf, mod::Module = Main)\n\nRun tests for the fenestration_source__building_type relationships in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_frame_material","page":"Library","title":"FinnishBuildingStockData.test_frame_material","text":"test_frame_material(;limit::Number=Inf, mod::Module = Main)\n\nRuns tests for the frame_material objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_heat_source","page":"Library","title":"FinnishBuildingStockData.test_heat_source","text":"test_heat_source(;limit::Number=Inf, mod::Module = Main)\n\nRuns tests for the heat_source objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_layer_id","page":"Library","title":"FinnishBuildingStockData.test_layer_id","text":"test_layer_id(;limit::Number=Inf, mod::Module = Main)\n\nRun tests for the layer_id objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_location_id","page":"Library","title":"FinnishBuildingStockData.test_location_id","text":"test_location_id(;limit::Number=Inf, mod::Module = Main)\n\nRuns tests for the location_id objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_source","page":"Library","title":"FinnishBuildingStockData.test_source","text":"test_source(; limit::Number=Inf, mod::Module = Main)\n\nRun tests for the source objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_source__structure","page":"Library","title":"FinnishBuildingStockData.test_source__structure","text":"test_source__structure(; limit::Number = Inf, mod::Module = Main)\n\nRun tests for the source__structure relationships in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_source__structure__building_type","page":"Library","title":"FinnishBuildingStockData.test_source__structure__building_type","text":"test_source__structure__building_type(; limit::Number = Inf, mod::Module = Main)\n\nRun tests for the source__structure__building_type relationships in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_source__structure__layer_id__structure_material","page":"Library","title":"FinnishBuildingStockData.test_source__structure__layer_id__structure_material","text":"test_source__structure__layer_id__structure_material(;\n    limit::Number = Inf,\n    mod::Module = Main\n)\n\nRun tests for the source__structure__layer_id__structure_material relationship in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_statistical_building_type","page":"Library","title":"FinnishBuildingStockData.test_statistical_building_type","text":"test_statistical_building_type(;limit::Number=Inf, mod::Module = Main)\n\nRuns statistical data tests for the building_type objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structural_building_type","page":"Library","title":"FinnishBuildingStockData.test_structural_building_type","text":"test_structural_building_type(;limit::Number=Inf, mod::Module = Main)\n\nRun structural data tests for the building_type objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structural_frame_material","page":"Library","title":"FinnishBuildingStockData.test_structural_frame_material","text":" test_structural_frame_material(; limit::Number = Inf, mod::Module = Main)\n\nRun structural data tests for the frame_material objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structural_layers","page":"Library","title":"FinnishBuildingStockData.test_structural_layers","text":"test_structural_layers(; limit::Number = Inf, mod::Module = Main)\n\nRun tests in Module mod to ensure the structural layers are sensible.\n\nEssentially, this means checking that the layer_number are continuous, the zeroth layer_tag is either load-bering structure or thermal insulation, and that the layer_weights sum to  1 for potentially overlapping layers (meaning those with identical layer_number).\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structure","page":"Library","title":"FinnishBuildingStockData.test_structure","text":"test_structure(; limit::Number = Inf, mod::Module = Main)\n\nTun tests for the structure objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structure__structure_type","page":"Library","title":"FinnishBuildingStockData.test_structure__structure_type","text":"test_structure__structure_type(; limit::Number = Inf, mod::Module = Main)\n\nRun tests for the structure__structure_type relationships in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structure_material","page":"Library","title":"FinnishBuildingStockData.test_structure_material","text":"test_structure_material(; limit::Number = Inf, mod::Module = Main)\n\nRun tests for the structure_material objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structure_material__frame_material","page":"Library","title":"FinnishBuildingStockData.test_structure_material__frame_material","text":"test_structure_material__frame_material(; limit::Number = Inf, mod::Module = Main)\n\nRun tests for the structure_material__frame_material relationships in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structure_type","page":"Library","title":"FinnishBuildingStockData.test_structure_type","text":"test_structure_type(; limit::Number = Inf, mod::Module = Main)\n\nRun tests for the structure_type objects in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_ventilation_source__building_type","page":"Library","title":"FinnishBuildingStockData.test_ventilation_source__building_type","text":"test_ventilation_source__building_type(; limit::Number = Inf, mod::Module = Main)\n\nRun tests for the ventilation_source__building_type relationships in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_structure_type__ventilation_space_heat_flow_direction","page":"Library","title":"FinnishBuildingStockData.test_structure_type__ventilation_space_heat_flow_direction","text":"test_structure_type__ventilation_space_heat_flow_direction(;\n    limit::Number = Inf,\n    mod::Module = Main,\n)\n\nRun tests for the structure_type__ventilation_space_heat_flow_direction relationship in Module mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.test_ventilation_space_heat_flow_direction","page":"Library","title":"FinnishBuildingStockData.test_ventilation_space_heat_flow_direction","text":"test_ventilation_space_heat_flow_direction(;\n    limit::Number = Inf,\n    mod::Module = Main\n)\n\nRun tests for the ventilation_space_heat_flow_direction objects in mod.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.thermal_conductivity","page":"Library","title":"FinnishBuildingStockData.thermal_conductivity","text":"thermal_conductivity(\n    material::Object;\n    weight::Float64 = 0.5,\n    mod::Module = Main\n)\n\nReturn the average thermal conductivity of the material in [W/mK].\n\nCalculated as a weighted average based on the minimum_thermal_conductivity_W_mK and maximum_thermal_conductivity_W_mK parameters in the input data, where the 0 <= weight <= 1 can be used to tweak the calculation.\n\nlambda_textweighted = w lambda_textmax + (1-w) lambda_textmin\n\nThe mod keyword is used to tweak the Module from which the parameters are read.\n\n\n\n\n\n","category":"function"},{"location":"library/#FinnishBuildingStockData.total_building_type_weight","page":"Library","title":"FinnishBuildingStockData.total_building_type_weight","text":"total_building_type_weight(source::Object, structure::Object; mod::Module = Main)\n\nReturn the total building_type_weight of the structure from mod, 0 if not applicable.\n\n\n\n\n\n","category":"function"},{"location":"#FinnishBuildingStockData.jl","page":"FinnishBuildingStockData.jl","title":"FinnishBuildingStockData.jl","text":"","category":"section"},{"location":"","page":"FinnishBuildingStockData.jl","title":"FinnishBuildingStockData.jl","text":"A Julia module for processing Finnish building stock data for the ArchetypeBuildingModel.jl module. Essentially, this module takes building stock statistics describing the number and floor area in a given building stock, as well as data describing structures, fenestration, and ventilation systems, and combines them into a single dataset with aggregated structural, fenestration, and ventilation properties matching the underlying building stock statistics.","category":"page"},{"location":"","page":"FinnishBuildingStockData.jl","title":"FinnishBuildingStockData.jl","text":"This module was originally made for processing the following datasets:","category":"page"},{"location":"","page":"FinnishBuildingStockData.jl","title":"FinnishBuildingStockData.jl","text":"Finnish building stock default structural data\nFinnish building stock detailed RT-card structural data (optional)\nFinnish building stock forecasts for 2020, 2030, 2040, and 2050","category":"page"},{"location":"","page":"FinnishBuildingStockData.jl","title":"FinnishBuildingStockData.jl","text":"but it can, in principle, be used to process any building stock data using a similar format. Note that this module requires Spine Interface, and has beed designed to be used via Spine Toolbox, so familiarizing oneself with them comes highly recommended.","category":"page"},{"location":"","page":"FinnishBuildingStockData.jl","title":"FinnishBuildingStockData.jl","text":"This documentation is organized as follows: The Required input data format section explains the format of the input data inside the input Spine Datastore used by the processing code. For explanation of the raw input data files, see the README.md of the input data repositories. Next, the Data processing overview section aims to explain the overall flow of the data processing, in order to give you a rough idea what is actually being done with the input data. Essentially, this section explains the process_datastore.jl main program, step by step. Finally, the Output data format section explains the final format the data is processed into, ready to be used by ArchetypeBuildingModel.jl. The Library contains the full documentation of all the functions contained in this module, automatically generated based on the docstrings in the codebase.","category":"page"},{"location":"#Contents","page":"FinnishBuildingStockData.jl","title":"Contents","text":"","category":"section"},{"location":"","page":"FinnishBuildingStockData.jl","title":"FinnishBuildingStockData.jl","text":"","category":"page"},{"location":"output/#Output-data-format","page":"Output data format","title":"Output data format","text":"","category":"section"},{"location":"output/","page":"Output data format","title":"Output data format","text":"The goal of the FinnishBuildingStockData.jl module is to combine data about building structures, fenestration, and ventilation with building stock statistics, resulting in building stock statistics containing aggregate structural properties. The previous Data processing overview explains the steps done to the input data described in the Required input data format in order to arrive at the desired output.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"This module uses a Spine Datastore for recording the output. See the Spine Toolbox repository for more information on the subject. In a Spine Datastore, the data is organized into object classes storing data for individual objects, and relationship classes storing data for relationships between multiple objects. Below, you'll find lists of all the Output object classes and Output relationship classes produced by the FinnishBuildingStockData.jl module, as well as brief explanations of their purpose, use, and contained parameters.","category":"page"},{"location":"output/#Output-object-classes","page":"Output data format","title":"Output object classes","text":"","category":"section"},{"location":"output/","page":"Output data format","title":"Output data format","text":"Note that there is a lot of overlap between these and the Input object classes.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"building_period: Represents a period in time, during which a building was built.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"period_start: The year when the building_period starts.\nperiod_end: The year when the building_period ends.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"building_stock: Represents a snapshot of a building stock, e.g. Finnish building stock in the year 2030. Used to separate e.g. different countries and years of building stock data.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"building_stock_year: Indicates the year this building_stock represents, e.g. 2020, 2030, etc.\nraster_weight_path: An optional filepath to a geographical raster data file containing weighting information for the weather data, e.g. population density or the like.\nshapefile_path: A Filepath to a shapefile containing the geographical information about the building stock.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"building_type: Represents a certain category of buildings, e.g. detached house, apartment block, office building, etc. Used to distinguish between different buildings found in the building stock statistics.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"heat_source: Represents a source of heat energy for a building, e.g. coal or electricity. Used to distinguish between different heating solutions in the building stock statistics.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"location_id: A unique identifier for a geographical location, e.g. a national municipality code.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"location_name: The name of the location in question, e.g. the name of the municipality.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"structure_type: Represents a category of building structures, e.g. exterior walls, base floors, roofs, etc. Used for storing common properties, like surface resistances and thermal bridges.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"exterior_resistance_m2K_W: Exterior surface resistance for this structure_type in [m2K/W].\ninterior_resistance_m2K_W: Interior surface resistance for this structure_type in [m2K/W].\nis_internal: A boolean flag for whether a structure is an internal structure, meaning not part of the building envelope. Set to true for partition walls and separating floors.\nlinear_thermal_bridge_W_mK: Assumed linear thermal bridge properties for this structure_type.\nstructure_type_notes: Freeform notes about the structure type, or its assumed parameters.","category":"page"},{"location":"output/#Output-relationship-classes","page":"Output data format","title":"Output relationship classes","text":"","category":"section"},{"location":"output/","page":"Output data format","title":"Output data format","text":"building_stock_statistics: The final building stock statistics containing the number of buildings and average gross-floor area per building for each (building_stock, building_type, building_period, location_id, heat_source), created using the create_building_stock_statistics! function.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"average_gross_floor_area_m2_per_building: The average gross-floor area in [m2] of buildings of building_type, built during building_period in location_id, heated using heat_source of the building_stock dataset.\nnumber_of_buildings: The number of buildings of building_type, built during building_period in location_id, heated using heat_source of the building_stock dataset.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"structure_statistics: The processed average structural properties for each (building_type, building_period, location_id, structure_type), created using the create_structure_statistics! function.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"design_U_W_m2K: The average design U-value of the aggregated structures in [W/m2K].\neffective_thermal_mass_J_m2K: Mean calculated effective thermal mass [J/m2K] of the structures corresponding to the statistics, per area of the structure.\nexternal_U_value_to_ambient_air_W_m2K: Mean calculated U-value [W/m2K] from the structure into the ambient air.\nexternal_U_value_to_ground_W_m2K: Mean calculated effective U-value [W/m2K] from the structure into the ground, according to Kissock, Kelly, Abinesh Selvacanabady, and Narendran Raghavan. \"Simplified Model for Ground Heat Transfer from Slab-on-Grade Buildings.\" ASHRAE Transactions 119.2 (2013).\ninternal_U_value_to_structure_W_m2K: Mean calculated U-value [W/m2K] from the structure into the interior air.\nlinear_thermal_bridges_W_mK: Mean linear thermal bridges [W/mK] of the seams between structures.\ntotal_U_value_W_m2K: Mean total effective U-value [W/m2K] of the structure, from the interior air into the ambient air/ground.","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"ventilation_and_fenestration_statistics: The processed averate ventilation and fenestration properties for each (building_type, building_period, location_id).","category":"page"},{"location":"output/","page":"Output data format","title":"Output data format","text":"HRU_efficiency: Mean heat-recovery efficiency of ventilation heat-recovery units.\ninfiltration_rate_1_h: Mean infiltration air change rate [1/h].\ntotal_normal_solar_energy_transmittance: Mean total normal solar energy transmittance of windows accounting for the effect of the frame-area fraction.\nventilation_rate_1_h: Mean ventilation air change rate [1/h].\nwindow_U_value_W_m2K: Mean window U-value [W/m2K].","category":"page"}]
}
