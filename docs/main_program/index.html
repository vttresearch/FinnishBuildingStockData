<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data processing overview · FinnishBuildingStockData</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FinnishBuildingStockData</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">FinnishBuildingStockData.jl</a></li><li><a class="tocitem" href="../input/">Required input data format</a></li><li class="is-active"><a class="tocitem" href>Data processing overview</a><ul class="internal"><li><a class="tocitem" href="#Using-the-main-program"><span>Using the main program</span></a></li><li><a class="tocitem" href="#Main-program-workflow"><span>Main program workflow</span></a></li></ul></li><li><a class="tocitem" href="../output/">Output data format</a></li><li><a class="tocitem" href="../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Data processing overview</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Data processing overview</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/vttresearch/FinnishBuildingStockData/blob/main/documentation/src/main_program.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Data-processing-overview"><a class="docs-heading-anchor" href="#Data-processing-overview">Data processing overview</a><a id="Data-processing-overview-1"></a><a class="docs-heading-anchor-permalink" href="#Data-processing-overview" title="Permalink"></a></h1><p>In this section, we&#39;ll go over the main idea behind the data processing workflow as implemented in the main program file <code>process_datastore.jl</code>. After the input data described in the above <a href="../input/#Required-input-data-format">Required input data format</a> section has been successfully imported into a <em>Spine Datastore</em>, the main program can be run to process the data into the format described by the following <a href="../output/#Output-data-format">Output data format</a> section.</p><h2 id="Using-the-main-program"><a class="docs-heading-anchor" href="#Using-the-main-program">Using the main program</a><a id="Using-the-main-program-1"></a><a class="docs-heading-anchor-permalink" href="#Using-the-main-program" title="Permalink"></a></h2><p>The <code>process_datastore.jl</code> main program is controlled using a number of command line arguments, the first two of which are required:</p><ol><li><code>&lt;input_datastore_url&gt;</code>: The url pointing to the <em>Spine Datastore</em> containing the input data in the <a href="../input/#Required-input-data-format">Required input data format</a>.</li><li><code>&lt;output_datastore_url&gt;</code>: The url pointing to the <em>Spine Datastore</em> into which the output will be saved according to the <a href="../output/#Output-data-format">Output data format</a>.</li></ol><p>Furthermore, the following keyword arguments can be used to tweak how the data is processed.</p><ol><li><code>scramble=&lt;false&gt;</code>: If set to <code>true</code>, will scramble all data in the Datastore.</li><li><code>num_lids=&lt;Inf&gt;</code>: Can be used to set a maximum number of <code>location_id</code>s when processing the data for testing purposes.</li><li><code>thermal_conductivity_weight=&lt;0.5&gt;</code>: Can be used to tweak hot the thermal conductivity data is sampled for the <code>structure_material</code>s. The default value corresponds to the average of the minimum and maximum values in the input data.</li><li><code>interior_node_depth=&lt;0.1&gt;</code>: Assumption regarding how deep the temperature node is located into the structures. The value indicates the depth as a fraction of the total thermal resistance between the interior surface of the structure, and the middle of the primary thermal insulation layer. The default value is based on the calibrations performed in the <a href="https://cris.vtt.fi/en/publications/sensitivity-of-a-simple-lumped-capacitance-building-thermal-model">manuscript</a>.</li><li><code>variation_period=&lt;2225140&gt;</code>: <em>Period of variations</em> as defined in EN ISO 13786:2017 Annex C. Default equals to roughly 26 days in seconds, and is based on the calibrations performed in the <a href="https://cris.vtt.fi/en/publications/sensitivity-of-a-simple-lumped-capacitance-building-thermal-model">manuscript</a>.</li></ol><h2 id="Main-program-workflow"><a class="docs-heading-anchor" href="#Main-program-workflow">Main program workflow</a><a id="Main-program-workflow-1"></a><a class="docs-heading-anchor-permalink" href="#Main-program-workflow" title="Permalink"></a></h2><p>The steps performed by the main program can be summarized in the following steps:</p><ol><li>Process the given command line arguments.</li><li>Open the input <em>Spine Datastore</em> using <em>Spine Interface</em>, and run input data tests using <a href="../library/#FinnishBuildingStockData.run_structural_tests"><code>run_structural_tests</code></a> and <a href="../library/#FinnishBuildingStockData.run_statistical_tests"><code>run_statistical_tests</code></a>, in order to ensure the input data makes sense.</li><li>Limit the set of <code>location_id</code>s based on the given <code>num_lids</code> keyword argument.</li><li>Create the <code>building_stock_year</code> parameter based on parsing the names of the <code>building_stock</code> <em>objects</em> in the input data using <a href="../library/#FinnishBuildingStockData.add_building_stock_year!"><code>add_building_stock_year!</code></a>.</li><li>Create the <code>building_stock_statistics</code> output <em>relationship class</em> using the <a href="../library/#FinnishBuildingStockData.create_building_stock_statistics!"><code>create_building_stock_statistics!</code></a> function.</li><li>Create the <code>structure_statistics</code> output <em>relationship class</em> using the <a href="../library/#FinnishBuildingStockData.create_structure_statistics!"><code>create_structure_statistics!</code></a> function with the desired <code>thermal_conductivity_weight</code>, <code>interior_node_depth</code>, and <code>variation_period</code> keyword arguments.</li><li>Create the <code>ventilation_and_fenestration_statistics</code> output <em>relationship class</em> using the <a href="../library/#FinnishBuildingStockData.create_ventilation_and_fenestration_statistics!"><code>create_ventilation_and_fenestration_statistics!</code></a> function.</li><li>Import the newly created output <em>relationship classes</em> into the output <em>Spine Datastore</em>, scrambling them if the <code>scramble=true</code> keyword has been set.</li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../input/">« Required input data format</a><a class="docs-footer-nextpage" href="../output/">Output data format »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.19 on <span class="colophon-date" title="Tuesday 4 October 2022 12:22">Tuesday 4 October 2022</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
